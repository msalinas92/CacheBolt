# ğŸ”§ Unique identifier for this CacheBolt instance
app_id: my-service

# ğŸŒ Port to bind the main proxy server (default: 3000)
proxy_port: 3000

# ğŸ› ï¸ Port to bind the admin interface and /metrics (default: 3001)
admin_port: 3001

# ğŸš¦ Maximum number of concurrent outbound requests to the downstream service
max_concurrent_requests: 200

# ğŸŒ Base URL of the upstream API/backend to which requests are proxied
downstream_base_url: http://localhost:4000

# ğŸ’¾ Backend used for persistent cache storage
# Available options: gcs, s3, azure, local
storage_backend: s3

# ğŸª£ Name of the Google Cloud Storage bucket (used if storage_backend is 'gcs')
gcs_bucket: cachebolt

# ğŸª£ Name of the Amazon S3 bucket (used if storage_backend is 's3')
s3_bucket: my-cachebolt-bucket

# ğŸ“¦ Name of the Azure Blob Storage container (used if storage_backend is 'azure')
azure_container: cachebolt-container

# ğŸ§  Memory cache configuration
cache:
  # ğŸš¨ System memory usage threshold (%) above which in-memory cache will start evicting entries
  memory_threshold: 90

  # ğŸ” Percentage of requests (per key) that should trigger a refresh from backend instead of using cache
  # Example: 10% means 1 in every 10 requests will bypass cache
  refresh_percentage: 1

  # ğŸ—‘ï¸ Cache lifetime before refresh the key
  ttl_seconds: 10

# âš ï¸ Latency-based failover configuration
latency_failover:
  # âŒ› Default maximum allowed latency in milliseconds for any request
  default_max_latency_ms: 1000

  # ğŸ›£ï¸ Path-specific latency thresholds
  path_rules:
    - pattern: "^/api/v1/products/.*"
      max_latency_ms: 15000
    - pattern: "^/auth/.*"
      max_latency_ms: 10000

# ğŸš« List of request headers to ignore when computing cache keys (case-insensitive)
ignored_headers:
  - postman-token
  - if-none-match
